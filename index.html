<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polyglot Pro</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body class="dark-theme">
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <h1>Polyglot Pro</h1>
            </div>
            <nav class="main-nav">
                <div class="language-selector">
                    <select id="sourceLanguageSelect" class="language-select">
                        <option value="english">🇺🇸 From English</option>
                        <option value="spanish">🇪🇸 From Spanish</option>
                        <option value="french">🇫🇷 From French</option>
                        <option value="german">🇩🇪 From German</option>
                        <option value="italian">🇮🇹 From Italian</option>
                        <option value="portuguese">🇵🇹 From Portuguese</option>
                        <option value="chinese">🇨🇳 From Chinese</option>
                        <option value="japanese">🇯🇵 From Japanese</option>
                        <option value="korean">🇰🇷 From Korean</option>
                        <option value="arabic">🇸🇦 From Arabic</option>
                    </select>
                </div>
                <div class="language-selector">
                    <select id="languageSelect" class="language-select">
                        <option value="spanish">🇪🇸 To Spanish</option>
                        <option value="french">🇫🇷 To French</option>
                        <option value="german">🇩🇪 To German</option>
                        <option value="italian">🇮🇹 To Italian</option>
                        <option value="portuguese">🇵🇹 To Portuguese</option>
                        <option value="chinese">🇨🇳 To Chinese</option>
                        <option value="japanese">🇯🇵 To Japanese</option>
                        <option value="korean">🇰🇷 To Korean</option>
                        <option value="arabic">🇸🇦 To Arabic</option>
                        <option value="english">🇺🇸 To English</option>
                    </select>
                </div>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <span class="theme-icon">🌙</span>
                </button>
                <button class="settings-btn" id="settingsBtn" aria-label="Settings">
                    <span class="settings-icon">⚙️</span>
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Image Upload Section -->
        <section class="upload-section" id="uploadSection">
            <div class="upload-container">
                <!-- Input Mode Selection -->
                <div class="input-mode-selector">
                    <h2>Select Analysis Mode</h2>
                    <div class="mode-buttons">
                        <button class="mode-btn active" id="imageModeBtn" data-mode="image">
                            <div class="mode-icon">📸</div>
                            <div class="mode-title">Visual Analysis</div>
                            <div class="mode-description">AI-powered image recognition</div>
                        </button>
                        <button class="mode-btn" id="textModeBtn" data-mode="text">
                            <div class="mode-icon">✍️</div>
                            <div class="mode-title">Scene Description</div>
                            <div class="mode-description">Natural language processing</div>
                        </button>
                        <button class="mode-btn" id="jsonModeBtn" data-mode="json">
                            <div class="mode-icon">📄</div>
                            <div class="mode-title">Import Analysis</div>
                            <div class="mode-description">Load saved analysis file</div>
                        </button>
                    </div>
                </div>

                <!-- Image Upload Area -->
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <div class="upload-icon">📸</div>
                        <h2>Import Media Asset</h2>
                        <p>Drag and drop or click to browse files</p>
                        <button class="upload-btn" id="uploadBtn">Browse Files</button>
                    </div>
                </div>

                <!-- Text Description Area -->
                <div class="text-input-area" id="textInputArea" style="display: none;">
                    <div class="text-input-content">
                        <div class="text-input-icon">✍️</div>
                        <h2>Scene Description Input</h2>
                        <p>Provide detailed description for AI analysis</p>
                        <textarea 
                            id="descriptionInput" 
                            class="description-textarea" 
                            placeholder="Enter detailed scene description: A bustling coffee shop in downtown Paris during morning rush hour. Customers queue at the counter while baristas prepare espresso drinks. Sunlight streams through large windows as people read newspapers and work on laptops..."
                            maxlength="500"
                        ></textarea>
                        <div class="character-counter">
                            <span id="charCount">0</span>/500 characters
                        </div>
                        <button class="analyze-btn" id="analyzeTextBtn" disabled>Process Description</button>
                    </div>
                </div>

                <!-- JSON Import Area -->
                <div class="json-import-area" id="jsonImportArea" style="display: none;">
                    <div class="json-import-content">
                        <div class="json-import-icon">📄</div>
                        <h2>Import Analysis File</h2>
                        <p>Select a saved analysis JSON file to load</p>
                        <button class="import-btn" id="importJsonBtn">Browse JSON Files</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Analysis Section -->
        <section class="analysis-section" id="analysisSection" style="display: none;">
            <div class="analysis-container">
                <!-- Image Display -->
                <div class="image-display">
                    <div class="image-frame">
                        <img id="selectedImage" alt="Selected image for analysis">
                        <div class="image-overlay">
                            <div class="image-info">
                                <span id="imageName">image.jpg</span>
                                <span id="imageSize">2.4 MB</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Status Panel -->
                <div class="status-panel" id="statusPanel">
                    <div class="status-content">
                        <div class="status-indicator">
                            <div class="loading-spinner"></div>
                            <span id="statusText">Analyzing image...</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>
                </div>

                <!-- Word Matching Game -->
                <div class="word-game-container" id="wordGameContainer" style="display: none;">
                    <div class="word-game-header">
                        <h3>🎯 Word Matching Challenge</h3>
                        <div class="game-stats">
                            <span class="score">Score: <span id="gameScore">0</span>/10</span>
                            <span class="subset">Set <span id="currentSubset">1</span></span>
                        </div>
                    </div>
                    <div class="game-mode-selector">
                        <button class="game-mode-btn active" id="wordGameModeBtn" data-mode="word">
                            📚 Word Matching
                        </button>
                        <button class="game-mode-btn" id="sentenceGameModeBtn" data-mode="sentence">
                            ✍️ Sentence Translation
                        </button>
                    </div>
                    <div class="word-game-content">
                        <div class="game-columns">
                            <div class="source-words">
                                <h4 id="sourceLanguageTitle">English Words</h4>
                                <div class="word-list" id="sourceWordList">
                                    <!-- Source language words will be populated here -->
                                </div>
                            </div>
                            <div class="target-words">
                                <h4 id="targetLanguageTitle">Spanish Words</h4>
                                <div class="word-list" id="targetWordList">
                                    <!-- Target language words will be populated here -->
                                </div>
                            </div>
                        </div>
                        <div class="game-controls">
                            <button class="game-btn" id="nextSubsetBtn" style="display: none;">Next Set</button>
                            <button class="game-btn" id="resetGameBtn">Reset Game</button>
                        </div>
                    </div>
                    <div class="sentence-game-content" id="sentenceGameContent" style="display: none;">
                        <div class="sentence-display">
                            <h4 id="sourceSentenceTitle">English Sentence</h4>
                            <div class="sentence-source" id="sourceSentence">
                                <!-- Source sentence will be displayed here -->
                            </div>
                        </div>
                        <div class="sentence-input">
                            <h4 id="targetSentenceTitle">Your Translation</h4>
                            <textarea 
                                id="sentenceInput" 
                                class="sentence-textarea" 
                                placeholder="Enter your translation here..."
                                rows="3"
                            ></textarea>
                            <button class="game-btn" id="checkSentenceBtn">Check Translation</button>
                        </div>
                        <div class="sentence-result" id="sentenceResult" style="display: none;">
                            <h4>Correct Translation</h4>
                            <div class="sentence-target" id="targetSentence">
                                <!-- Target sentence will be displayed here -->
                            </div>
                            <div class="sentence-comparison" id="sentenceComparison">
                                <!-- Word-by-word comparison will be shown here -->
                            </div>
                        </div>
                        <div class="sentence-controls">
                            <div class="sentence-stats">
                                <span class="sentence-score">Sentence: <span id="currentSentenceNum">1</span>/5</span>
                            </div>
                            <div class="sentence-buttons">
                                <button class="game-btn" id="nextSentenceBtn" style="display: none;">Next Sentence</button>
                                <button class="game-btn" id="resetSentenceBtn">Reset Sentences</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analysis Panels -->
                <div class="analysis-panels">

                    <!-- Vocabulary Panel -->
                    <div class="panel vocabulary-panel" id="vocabularyPanel" style="display: none;">
                        <div class="panel-header">
                            <h3>📚 Vocabulary Bank</h3>
                            <button class="panel-toggle" data-panel="vocabulary">−</button>
                        </div>
                        <div class="panel-content" id="vocabularyContent">
                            <!-- Vocabulary items will be populated here -->
                        </div>
                    </div>

                    <!-- Story Panel -->
                    <div class="panel story-panel" id="storyPanel" style="display: none;">
                        <div class="panel-header">
                            <h3>📖 Narrative Content</h3>
                            <button class="panel-toggle" data-panel="story">−</button>
                        </div>
                        <div class="panel-content" id="storyContent">
                            <!-- Story content will be populated here -->
                        </div>
                    </div>

                    <!-- Conversation Panel -->
                    <div class="panel conversation-panel" id="conversationPanel" style="display: none;">
                        <div class="panel-header">
                            <h3>💬 Dialogue Scenarios</h3>
                            <button class="panel-toggle" data-panel="conversation">−</button>
                        </div>
                        <div class="panel-content" id="conversationContent">
                            <!-- Conversation content will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Bar -->
            <div class="action-bar">
                <button class="action-btn secondary" id="newSceneBtn">New Project</button>
                <button class="action-btn secondary" id="saveBtn" disabled>Save Analysis</button>
                <button class="action-btn primary" id="analyzeAgainBtn" disabled>Re-analyze</button>
            </div>
        </section>
    </main>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>System Configuration</h3>
                <button class="modal-close" id="closeSettingsBtn">×</button>
            </div>
            <div class="modal-content">
                <div class="setting-group">
                    <label for="ollamaUrl">AI Engine Endpoint:</label>
                    <input type="text" id="ollamaUrl" value="http://localhost:11434" placeholder="http://localhost:11434">
                    <small>Ensure Ollama service is running with Gemma 3 model</small>
                </div>
                <div class="setting-group">
                    <label>Engine Status:</label>
                    <div class="connection-status" id="connectionStatus">
                        <span class="status-indicator">🔴</span>
                        <span>Initializing connection...</span>
                    </div>
                    <button class="action-btn secondary" id="testConnectionBtn">Test Engine</button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="action-btn secondary" id="cancelSettingsBtn">Discard</button>
                <button class="action-btn primary" id="saveSettingsBtn">Apply Changes</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <script type="module" src="renderer.js"></script>
</body>
</html>